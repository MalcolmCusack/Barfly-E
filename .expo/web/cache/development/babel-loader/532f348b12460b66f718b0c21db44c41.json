{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport { Text, View } from \"../../../components/Themed\";\nimport { Card, Title, Paragraph, Caption, Button, Subheading, Divider } from 'react-native-paper';\nimport { getUser } from \"../../graphql/queries\";\nimport { API, graphqlOperation } from 'aws-amplify';\nimport { List, Colors } from 'react-native-paper';\nimport { updateOrder } from \"../../graphql/mutations\";\n\nvar Order = function Order(_ref) {\n  var order = _ref.order;\n\n  var _useState = useState(JSON.parse(order.items)),\n      _useState2 = _slicedToArray(_useState, 2),\n      orderItems = _useState2[0],\n      setOrderItems = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      expanded = _useState8[0],\n      setExpanded = _useState8[1];\n\n  var updateCurrentOrder = function updateCurrentOrder() {\n    var update, updateResponse;\n    return _regeneratorRuntime.async(function updateCurrentOrder$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            update = API.graphql(graphqlOperation(updateOrder, {\n              input: payload\n            }));\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(update);\n\n          case 4:\n            updateResponse = _context.sent;\n            console.log(updateResponse);\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n\n  var startOrder = function startOrder() {\n    var payload, update, updateResponse;\n    return _regeneratorRuntime.async(function startOrder$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            payload = {\n              id: order.id,\n              items: order.items,\n              userID: order.userID,\n              orderStatus: \"progress\"\n            };\n            _context2.prev = 1;\n            update = API.graphql(graphqlOperation(updateOrder, {\n              input: payload\n            }));\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(update);\n\n          case 5:\n            updateResponse = _context2.sent;\n            console.log(updateResponse);\n            _context2.next = 12;\n            break;\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.log(_context2.t0);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 9]], Promise);\n  };\n\n  var completeOrder = function completeOrder() {\n    var payload, update, updateResponse;\n    return _regeneratorRuntime.async(function completeOrder$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            payload = {\n              id: order.id,\n              items: order.items,\n              userID: order.userID,\n              orderStatus: \"complete\"\n            };\n            _context3.prev = 1;\n            update = API.graphql(graphqlOperation(updateOrder, {\n              input: payload\n            }));\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(update);\n\n          case 5:\n            updateResponse = _context3.sent;\n            console.log(updateResponse);\n            _context3.next = 12;\n            break;\n\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](1);\n            console.log(_context3.t0);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[1, 9]], Promise);\n  };\n\n  useEffect(function () {\n    var gatherUser = function gatherUser() {\n      var data, response;\n      return _regeneratorRuntime.async(function gatherUser$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              console.log(order);\n              data = API.graphql({\n                query: getUser,\n                variables: {\n                  id: order.userID\n                }\n              });\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(data);\n\n            case 5:\n              response = _context4.sent;\n              console.log(response);\n              setUser(response.data.getUser);\n              setIsLoading(false);\n              _context4.next = 14;\n              break;\n\n            case 11:\n              _context4.prev = 11;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(_context4.t0);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, [[0, 11]], Promise);\n    };\n\n    gatherUser();\n  }, []);\n\n  var handlePress = function handlePress() {\n    setExpanded(!expanded);\n  };\n\n  var renderOrder = function renderOrder() {\n    React.createElement(List.Section, null, React.createElement(List.Accordion, {\n      title: user.name + \"'s Order\",\n      expanded: expanded,\n      onPress: handlePress\n    }, orderItems.map(function (item) {\n      return React.createElement(List.Item, {\n        key: item.id,\n        title: item.name,\n        description: item.id,\n        left: function left(props) {\n          React.createElement(List.Icon, {\n            color: Colors.blue500,\n            icon: \"check\"\n          });\n        },\n        right: function right(props) {\n          React.createElement(List.Icon, {\n            icon: \"check\"\n          });\n        }\n      });\n    })));\n  };\n\n  var getTime = function getTime() {\n    var orderDate = new Date(order.createdAt);\n    var time = orderDate.getHours() + ':' + orderDate.getMinutes() + ':' + orderDate.getSeconds();\n    return time;\n  };\n\n  return React.createElement(View, null, !isLoading ? React.createElement(Card, {\n    key: order.id\n  }, React.createElement(Card.Title, {\n    title: user.name + \"'s order\"\n  }), React.createElement(Caption, null, \"Placed: \", getTime()), React.createElement(Divider, null), React.createElement(Card.Content, null, orderItems.map(function (item) {\n    return React.createElement(Subheading, {\n      key: item.id\n    }, item.name);\n  })), React.createElement(Card.Actions, null, React.createElement(Button, {\n    onPress: startOrder\n  }, \"Start\"), React.createElement(Button, {\n    onPress: completeOrder\n  }, \"Complete\"))) : null);\n};\n\nexport default Order;","map":{"version":3,"sources":["/Users/malc/Desktop/barfly-e/src/components/orderqueue/Order.js"],"names":["React","useState","useEffect","Text","View","Card","Title","Paragraph","Caption","Button","Subheading","Divider","getUser","API","graphqlOperation","List","Colors","updateOrder","Order","order","JSON","parse","items","orderItems","setOrderItems","user","setUser","isLoading","setIsLoading","expanded","setExpanded","updateCurrentOrder","update","graphql","input","payload","updateResponse","console","log","startOrder","id","userID","orderStatus","completeOrder","gatherUser","data","query","variables","response","handlePress","renderOrder","name","map","item","props","blue500","getTime","orderDate","Date","createdAt","time","getHours","getMinutes","getSeconds"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { Text, View } from '../../../components/Themed';\nimport {Card, Title, Paragraph, Caption, Button, Subheading, Divider} from 'react-native-paper';\nimport { getUser } from '../../graphql/queries';\nimport {API, graphqlOperation} from 'aws-amplify';\nimport { List, Colors } from 'react-native-paper';\nimport {updateOrder} from '../../graphql/mutations';\n\n\n\nconst Order = ({ order }) => {\n\n    const [orderItems, setOrderItems] = useState(JSON.parse(order.items))\n    const [user, setUser] = useState()\n    const [isLoading, setIsLoading] = useState(true)\n    const [expanded, setExpanded] = useState(false)\n\n    \n\n    const updateCurrentOrder = async () => {\n\n\n        try {\n            const update = API.graphql(graphqlOperation(updateOrder, {\n                input: payload\n            }))\n            const updateResponse = await update\n            console.log(updateResponse)\n        } catch (err) {\n            console.log(err)\n        }\n        \n    }\n\n    const startOrder = async () => {\n        const payload = {\n            id: order.id,\n            items: order.items,\n            userID: order.userID,\n            orderStatus: \"progress\",\n    \n        }\n\n        try {\n            const update = API.graphql(graphqlOperation(updateOrder, {\n                input: payload\n            }))\n            const updateResponse = await update\n            console.log(updateResponse)\n        } catch (err) {\n            console.log(err)\n        }\n        \n    }\n\n    const completeOrder = async () => {\n        const payload = {\n            id: order.id,\n            items: order.items,\n            userID: order.userID,\n            orderStatus: \"complete\",\n    \n        }\n\n        try {\n            const update = API.graphql(graphqlOperation(updateOrder, {\n                input: payload\n            }))\n            const updateResponse = await update\n            console.log(updateResponse)\n        } catch (err) {\n            console.log(err)\n        }\n        \n    }\n\n    useEffect(() => {\n\n        const gatherUser = async () => {\n            try { \n                console.log(order)\n                const data = API.graphql( {query: getUser, \n                    variables: {\n                        id: order.userID\n                    }\n                })\n                const response =  await data\n                console.log(response)\n                setUser(response.data.getUser)\n                setIsLoading(false)\n    \n            } catch (err) {\n                console.log(err)\n            }\n        }\n\n        gatherUser()\n\n        \n    }, [])\n\n    const handlePress = () => {\n        setExpanded(!expanded)\n    }\n\n     const renderOrder = () => {\n        <List.Section>\n        <List.Accordion\n           title={user.name + \"'s Order\"}\n           expanded={expanded}\n           onPress={handlePress}\n       >\n           {orderItems.map(item => {\n              return <List.Item key={item.id} \n                title={item.name} \n                description={item.id} \n                left={props => {<List.Icon color={Colors.blue500} icon='check'/>}}\n                right={props => {<List.Icon icon='check'/>}}\n                >\n              </List.Item>\n             \n           })\n           }\n       </List.Accordion>\n    </List.Section>\n     }\n\n    const getTime = () => {\n        const orderDate = new Date(order.createdAt);\n        const time = orderDate.getHours() + ':' +  orderDate.getMinutes() + ':' + orderDate.getSeconds();\n        return time\n    }\n    \n    return (\n\n        <View>\n            {!isLoading ? (\n                   <Card key={order.id}>\n                       <Card.Title title={user.name + \"'s order\"} />\n                       <Caption>Placed: {getTime()}</Caption>\n                       <Divider />\n                       \n                       <Card.Content>\n                           {orderItems.map(item => {\n                              return (\n                                <Subheading key={item.id}>\n                                    {item.name}\n                               </Subheading>\n                              ) \n                           })}\n                        \n                       </Card.Content>\n                       <Card.Actions>\n                           <Button onPress={startOrder}>Start</Button>\n                           <Button onPress={completeOrder}>Complete</Button>\n                       </Card.Actions>\n\n                   </Card>\n            \n            ) : null}\n            \n            \n\n        </View>\n    )\n}\n\n\nexport default Order\n"]},"metadata":{},"sourceType":"module"}