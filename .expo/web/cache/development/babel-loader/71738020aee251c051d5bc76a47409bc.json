{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport { API, graphqlOperation } from 'aws-amplify';\nimport { onCreateOrder } from \"../../graphql/subscriptions\";\nimport { listOrders } from \"../../graphql/queries\";\nimport { Text, View } from \"../../../components/Themed\";\nimport Order from \"./Order\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'felx'\n  },\n  orderQueueContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'felx',\n    flexDirection: 'row'\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold'\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%'\n  }\n});\n\nvar OrderQueue = function OrderQueue() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      orderItems = _useState2[0],\n      setOrderItems = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orders = _useState4[0],\n      setOrders = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      allOrders = _useState6[0],\n      setAllOrders = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n\n  var orderTest = [{\n    id: 'c3d52efa-84b1-44c3-8bf6-813fcc19f84d',\n    timestamp: null,\n    items: [\"[{\\\"price\\\":16,\\\"name\\\":\\\"Bison Burger\\\",\\\"id\\\":\\\"05c28679-14c8-4a06-9261-c739f4f4f262\\\"},{\\\"price\\\":69.69,\\\"name\\\":\\\"Can of whoop ass\\\",\\\"id\\\":\\\"ca27fa30-54ac-4d0e-92a8-f5d216360289\\\"},{\\\"price\\\":23.5203409626507,\\\"name\\\":\\\"minim ex adipisici\\\",\\\"id\\\":\\\"5dde62ff-f2df-45fe-ae3c-0d3ff1d99bc1\\\"}]\"],\n    completed: false,\n    userID: \"7b91aced-aa0f-44f8-b436-9dbe35862c8e\",\n    barID: null,\n    employeeID: null,\n    _version: 1,\n    _deleted: null,\n    _lastChangedAt: 1638242406472,\n    createdAt: \"2021-11-30T03:20:06.447Z\",\n    updatedAt: \"2021-11-30T03:20:06.447Z\",\n    User: null\n  }, {\n    id: 'c3d52efa-84b1-44c3-8bf6-413fcc19f84d',\n    timestamp: null,\n    items: [\"[{\\\"price\\\":16,\\\"name\\\":\\\"Bison Burger\\\",\\\"id\\\":\\\"05c28679-14c8-4a06-9261-c739f4f4f262\\\"},{\\\"price\\\":69.69,\\\"name\\\":\\\"Can of whoop ass\\\",\\\"id\\\":\\\"ca27fa30-54ac-4d0e-92a8-f5d216360289\\\"},{\\\"price\\\":23.5203409626507,\\\"name\\\":\\\"minim ex adipisici\\\",\\\"id\\\":\\\"5dde62ff-f2df-45fe-ae3c-0d3ff1d99bc1\\\"}]\"],\n    completed: false,\n    userID: \"7b91aced-aa0f-44f8-b436-9dbe35862c8e\",\n    barID: null,\n    employeeID: null,\n    _version: 1,\n    _deleted: null,\n    _lastChangedAt: 1638242406472,\n    createdAt: \"2021-11-30T03:20:06.447Z\",\n    updatedAt: \"2021-11-30T03:20:06.447Z\",\n    User: null\n  }];\n  useEffect(function () {\n    var subscribe = function subscribe() {\n      var ordersPromise, response, orderResponse;\n      return _regeneratorRuntime.async(function subscribe$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              ordersPromise = API.graphql(graphqlOperation(listOrders));\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(ordersPromise);\n\n            case 4:\n              response = _context.sent;\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n              try {\n                orderResponse = API.graphql(graphqlOperation(onCreateOrder)).subscribe({\n                  next: function next(orderData) {\n                    console.log('full order data: ', orderData.value.data.onCreateOrder);\n                    var items = JSON.parse(orderData.value.data.onCreateOrder.items);\n                    setOrderItems(function (orderItems) {\n                      return [].concat(_toConsumableArray(orderItems), [items]);\n                    });\n                    setOrders(function (orders) {\n                      return [].concat(_toConsumableArray(orders), [orderData.value.data.onCreateOrder]);\n                    });\n                  }\n                });\n                setIsLoading(false);\n              } catch (err) {\n                console.log(err);\n              }\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    };\n\n    subscribe();\n  }, []);\n  console.log(orderItems);\n  console.log(orders);\n  orders.map(function (order) {\n    console.log('order: ', order);\n  });\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(Text, {\n    style: styles.title\n  }, \"Order Queue\"), React.createElement(View, {\n    style: styles.orderQueueContainer\n  }, !isLoading ? orderTest.map(function (order) {\n    return React.createElement(Order, {\n      key: order.id,\n      order: order\n    });\n  }) : null));\n};\n\nexport default OrderQueue;","map":{"version":3,"sources":["/Users/malc/Desktop/barfly-e/src/components/orderqueue/OrderQueue.js"],"names":["React","useState","useEffect","API","graphqlOperation","onCreateOrder","listOrders","Text","View","Order","styles","StyleSheet","create","container","flex","alignItems","justifyContent","display","orderQueueContainer","flexDirection","title","fontSize","fontWeight","separator","marginVertical","height","width","OrderQueue","orderItems","setOrderItems","orders","setOrders","allOrders","setAllOrders","isLoading","setIsLoading","orderTest","id","timestamp","items","completed","userID","barID","employeeID","_version","_deleted","_lastChangedAt","createdAt","updatedAt","User","subscribe","ordersPromise","graphql","response","console","log","orderResponse","next","orderData","value","data","JSON","parse","err","map","order"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {API, graphqlOperation} from 'aws-amplify';\nimport {onCreateOrder} from '../../graphql/subscriptions';\nimport { listOrders } from '../../graphql/queries';\nimport { Text, View } from '../../../components/Themed';\nimport Order from './Order';\nimport { StyleSheet } from 'react-native';\n\nconst styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      alignItems: 'center',\n      justifyContent: 'center',\n      display: 'felx'\n    },\n    orderQueueContainer: {\n    flex: 1,\n      alignItems: 'center',\n      justifyContent: 'center',\n      display: 'felx',\n      flexDirection: 'row'\n    },\n    title: {\n      fontSize: 20,\n      fontWeight: 'bold',\n      \n    },\n    separator: {\n      marginVertical: 30,\n      height: 1,\n      width: '80%',\n    },\n  });\n\nconst OrderQueue = () => {\n\n    const [orderItems, setOrderItems] = useState([])\n    const [orders, setOrders] = useState([])\n    const [allOrders, setAllOrders] = useState([])\n    const [isLoading, setIsLoading] = useState(true)\n\n    const orderTest = [\n        {\n    \n             id :  'c3d52efa-84b1-44c3-8bf6-813fcc19f84d' ,\n             timestamp : null,\n             items : [\n                \"[{\\\"price\\\":16,\\\"name\\\":\\\"Bison Burger\\\",\\\"id\\\":\\\"05c28679-14c8-4a06-9261-c739f4f4f262\\\"},{\\\"price\\\":69.69,\\\"name\\\":\\\"Can of whoop ass\\\",\\\"id\\\":\\\"ca27fa30-54ac-4d0e-92a8-f5d216360289\\\"},{\\\"price\\\":23.5203409626507,\\\"name\\\":\\\"minim ex adipisici\\\",\\\"id\\\":\\\"5dde62ff-f2df-45fe-ae3c-0d3ff1d99bc1\\\"}]\"\n            ],\n             completed : false,\n             userID : \"7b91aced-aa0f-44f8-b436-9dbe35862c8e\",\n             barID : null,\n             employeeID : null,\n             _version : 1,\n             _deleted : null,\n             _lastChangedAt : 1638242406472,\n             createdAt : \"2021-11-30T03:20:06.447Z\",\n             updatedAt : \"2021-11-30T03:20:06.447Z\",\n             User : null\n    \n    },\n    {\n    \n        id :  'c3d52efa-84b1-44c3-8bf6-413fcc19f84d' ,\n        timestamp : null,\n        items : [\n           \"[{\\\"price\\\":16,\\\"name\\\":\\\"Bison Burger\\\",\\\"id\\\":\\\"05c28679-14c8-4a06-9261-c739f4f4f262\\\"},{\\\"price\\\":69.69,\\\"name\\\":\\\"Can of whoop ass\\\",\\\"id\\\":\\\"ca27fa30-54ac-4d0e-92a8-f5d216360289\\\"},{\\\"price\\\":23.5203409626507,\\\"name\\\":\\\"minim ex adipisici\\\",\\\"id\\\":\\\"5dde62ff-f2df-45fe-ae3c-0d3ff1d99bc1\\\"}]\"\n       ],\n        completed : false,\n        userID : \"7b91aced-aa0f-44f8-b436-9dbe35862c8e\",\n        barID : null,\n        employeeID : null,\n        _version : 1,\n        _deleted : null,\n        _lastChangedAt : 1638242406472,\n        createdAt : \"2021-11-30T03:20:06.447Z\",\n        updatedAt : \"2021-11-30T03:20:06.447Z\",\n        User : null\n\n},\n    \n    ]\n\n\n\n\n  useEffect(() => {\n    const subscribe = async () => {\n\n        try {\n        const ordersPromise = API.graphql(graphqlOperation(listOrders))\n        const response = await ordersPromise\n        //setAllOrders([...allOrders, response.data.listOrders.items])\n        //console.log(response.data.listOrders.items)\n        } catch (err) {\n        console.log(err)\n        }\n\n        try {\n            const orderResponse = API.graphql(graphqlOperation(onCreateOrder)\n            ).subscribe({\n                next: (orderData) => {\n                    console.log('full order data: ', orderData.value.data.onCreateOrder)\n                    const items = JSON.parse(orderData.value.data.onCreateOrder.items)\n                    setOrderItems(orderItems => [...orderItems, items])\n                    setOrders(orders => [...orders, orderData.value.data.onCreateOrder])\n\n                }\n            })\n\n  \n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n        }\n\n    }\n      \n    subscribe()\n      \n  }, [])\n\n    console.log(orderItems)\n    console.log(orders)\n\n    orders.map(order => {\n        console.log('order: ', order)\n    })\n  \n    return (\n        <View style={styles.container}>\n            <Text style={styles.title}>Order Queue</Text>\n            <View style={styles.orderQueueContainer}>\n                {!isLoading ? orderTest.map(order => {\n                        return <Order key={order.id} order={order} />\n                }) : null}\n            </View>\n            \n        </View>\n    )\n}\n\n\n\nexport default OrderQueue\n"]},"metadata":{},"sourceType":"module"}